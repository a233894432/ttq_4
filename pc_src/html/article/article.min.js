define(["text!html/default/header.html","text!html/article/article.html","text!html/article/comment.html"],function(e,t,a){var i,o,p,s,l,m,n,r,c=1,d=30,u=function(){function u(e){void 0,e.success?(n=e.data,n.isshow=1,void 0,n.title||"1"==n.type||(n.title=$app.getStr(n.content,20)),void 0==n.author&&(n.author=0),"0"==n.isImg&&(n.imgs=n.postImg),void 0==n.readnum&&(n.readnum=n.readNum),void 0==n.commentnum&&(n.commentnum=n.commentNum),void 0==n.praisenum&&(n.praisenum=n.praiseNum),void 0==n.sharenum&&(n.sharenum=n.shareNum),void 0==n.createat&&(n.createat=$app.formatDate(n.created)),o&&void 0==n.imgs&&(n.imgs=0),void 0,appView.html(s(i)+l(n)),isMoblie&&$app.getFixed("am-ismoblie"),o?$app.getAjax($app.apiurl.service.expert_article_comment,w,v):$app.getAjax($app.apiurl.service.post_clist,w,v)):"0008"==e.code?(ck.remove("token"),ck.remove("userinfo"),$app.layer.alert("请重新登录"),window.location="index.html?m=login"):(n={isshow:0},appView.html(s(i)+l(n)))}function g(e,t){n={isshow:0},appView.html(s(i)+l(n))}function h(e){void 0}function v(e){if(void 0,e.success&&o){r=e.data;for(var t=0;t<r.list.length;t++)r.list[t].created=$app.formatDate(r.list[t].created);r.isshow=1,appView.append(commentHtml(r))}else if(e.success){r=e,r.isshow=1,r.totalCount=e.num,r.list=e.data;for(var t=0;t<r.list.length;t++)r.list[t].created=r.list[t].createat,r.list[t].nickname=r.list[t].username,"0"!=r.list[t].parentid&&(r.list[t].isComment=1,r.list[t].comment={nickname:r.list[t].parentname,content:r.list[t].parentcomment});appView.append(commentHtml(r))}else r={isshow:0},appView.append(commentHtml(r))}l=_.template(t),s=_.template(e),commentHtml=_.template(a),o=ck.get("token");var f=ck.getJSON("userinfo");m=$app.getModel("id"),p=$app.getModel("form"),"app"==p&&(s=_.template("")),void 0==f?i={isshow:0}:(void 0,f.isshow=1,i=f),void 0;var $={token:o,postid:m},w={token:o,postid:m,pageno:c,pagesize:d};o?$app.getAjax($app.apiurl.service.expert_detail,$,u,g):$app.getAjax($app.apiurl.service.post_detail,$,u,g),$app.getAjax($app.apiurl.service.addread,$,h)};return u});