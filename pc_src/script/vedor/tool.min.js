define(["jquery","underscore","progress","domReady","layer","md5"],function(e,t,o,n,i,r){t.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var s={};return s.isdebug=!0,s.deploy={localhost:"http://localhost/api",forecast:"http://ttkapi.ttq.com:900",hxpreRelease:"http://ttc.ttq.com"},s.host=s.deploy.localhost,s.version="10",s.service={store_alist:"/store/alist",checkCode:"/member/checkImgVaildCode",validatcode:"/member/validatcode",simlogin:"/member/simlogin",expert_detail:"/post/expertArticleDetail",expert_list:"/post/expertArticleList ",write_Article:"/post/writeArticle",subscriptionList:"/post/subscriptionList",expert_article_del:"/post/expertArticleDel",expert_article_comment:"/post/expertArticleCommentList",addread:"/post/addread",post_detail:"/post/detail",post_clist:"/post/clist"},{version:"0.0.1",progress:o,layer:i,md5:r,apiurl:s,init:function(){console.log("init"),console.log("当前接口地址是"+s.host)},endProgress:function(){o().end()},getUa:function(){var e=window.navigator.userAgent.toLocaleLowerCase(),t=!!e.match(/(ipad|iphone|mac)/i),o=!!e.match(/android/i),n=!!e.match(/MSIE/i),i=!!e.match(/os 6.1/i),r=!!e.match(/MicroMessenger/i);return{isApple:t,isAndroid:o,isWinPhone:n,ios6:i,isweixin:r}},getModel:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),o=window.location.search.substr(1).match(t);return null!=o?unescape(o[2]):null},isCellphone:function(e){var t=/^(13[0-9]|14[57]|15[012356789]|17[0678]|18[0-9])\d{8}$/;return t.test(e)},getAjax:function(o,n,i,r){var c=s.host+o;console.log("请求地址是:"+c),e.ajax({type:"POST",url:c,data:n,dataType:"json",timeout:5e3,success:function(e){return i(e)},error:function(e){return t.isFunction(r)?r(o,e):void $app.getError(o,e)},complete:function(e,t){}})},getError:function(e,t){console.log("出错的地址是:"+e+"::::返回值是"+t)},checkLogin:function(){console.log("检验用户是否已经登录"),ck.get("token")||(window.location.href="index.html?m=login")},userOut:function(){ck.remove("token"),ck.remove("userinfo"),window.location.href="index.html?m=login"},getStr:function(e,t){var o="";e.length>=12&&(o="...");var n=e.substr(0,t)+o;return n.toString()},openApp:function(e){var o=t.now(),n=this.getModel("id");setTimeout(function(){var e=new Date;(!o||2010>e-o)&&(window.location.href="http://bbs.ttq.com/dl")},2e3),e?window.location="szttq1023319867://"+e:window.location="szttq1023319867://post/detail?post_id="+n},strLen:function(e,t){return e.length<t?(console.log(e.length+"----"+t),!0):!1},formatDate:function(e,t){function o(e,t){for(var o=""+e,n=o.length,i="",r=t;r-- >n;)i+="0";return i+o}return e=new Date(e),e.getFullYear()+"-"+o(e.getMonth()+1,2)+"-"+o(e.getDate(),2)+" "+o(e.getHours(),2)+":"+o(e.getMinutes(),2)+":"+o(e.getSeconds(),2)},dellArticle:function(t){function o(o){if(o.success){i.msg("删除成功");var n="#article"+t;e(n).fadeOut("slow",function(){e(n).remove()})}else i.msg(o.msg)}function n(e){i.msg(e.msg)}var r=ck.get("token"),s={postid:t,token:r};$app.getAjax($app.apiurl.service.expert_article_del,s,o,n)},getFixed:function(e){window.onscroll=function(t){var t=t||window.event,o=document.documentElement.scrollTop||document.body.scrollTop,n=document.getElementById(e);if(o>50){var i=o/100;n.style.opacity=i,n.className="am-ismoblie newHeader"}else n.style.opacity=1,n.className="am-ismoblie "}}}});